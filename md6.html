<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>生成md5和测试生成的md5</title>
<script src="js/md5_min.js" language="javascript" type="text/javascript"></script>
<!-- <script src="md5.js" language="javascript" type="text/javascript"></script> -->
<script language="javascript" type="text/javascript">
	//生成md5
	function compose(str,key){
		//hex_md5(str)十六进制md5值；b64_md5(str)64位编码 
		if (key=='1')
			document.getElementById("value").innerHTML=hex_md5(str);//把生成的十六进制md5值写入lable
		else
			document.getElementById("value").innerHTML=b64_md5(str);//把生成的64位编码md5值写入lable
	}
	//对比是否和真正的md5值相同
	function verify(md5_obj){
		var val_obj = document.getElementById("value");//得到lable的对象
		var val = val_obj.innerHTML; //得到lable的值
		var md5 = md5_obj.value; 
		md5 = md5.replace(/(^\s*)|(\s*$)/g, ""); //去除两头空格
		if(val!=""){
			alert((md5==val)?"haha,same value":"oh,different value");//三元表达式 判断是否相同
			md5.value="true md5 value from other place";
			}
		else
			val_obj.innerHTML="compose the md5 value first";//没生成 就点击验证显示的提示
	}
</script>
</head>

<body>
input a string: <input id="test" value="test">
<input type="button" value="compose" onClick="compose(test.value,'1')">
<input type="button" value="compose64" onClick="compose(test.value,'0')"><br/>
md5: <label id="value" style=" color:#090"></label><br/>
verify the created value: 
<input id="md5" onFocus="this.value=''" value="true md5 value from other place" size="40">
<input type="button" value="verify" onClick="verify(md5)">
</body>
</html>
